<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>DONO</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/markdown-it/13.0.1/markdown-it.min.js"></script>
<style>
body { background-color: #000; color: #fff; font-family: 'Inter', sans-serif; }
.glass-panel { background: rgba(20, 20, 20, 0.8); backdrop-filter: blur(20px); border-bottom: 1px solid rgba(255, 255, 255, 0.08); }
.typing-dot { animation: bounce 1.4s infinite ease-in-out both; }
.typing-dot:nth-child(1) { animation-delay: -0.32s; }
.typing-dot:nth-child(2) { animation-delay: -0.16s; }
@keyframes bounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: #333; border-radius: 10px; }
/* Markdown Styles */
.prose p { margin-bottom: 0.8em; }
.prose strong { color: #fff; font-weight: 600; }
.prose ul { list-style-type: disc; padding-left: 1.2em; margin-bottom: 0.8em; color: #a1a1aa; }
.prose h1, .prose h2 { font-weight: 600; margin-bottom: 0.5em; color: #fff; margin-top: 1em; }
.prose code { background: #27272a; padding: 2px 4px; rounded: 4px; font-family: monospace; font-size: 0.9em; }
</style>
<!-- 2. CORE LIBRARIES -->
<script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body class="h-screen w-screen overflow-hidden selection:bg-white selection:text-black">
<div id="root" class="h-full w-full flex flex-col items-center justify-center text-zinc-500 text-sm">
<div class="animate-pulse mb-2">Booting DONO Core...</div>
<div id="debug-msg" class="text-xs text-red-500 mt-4 font-mono"></div>
</div>
<!-- 3. APP LOGIC -->
<script type="text/babel">
window.onerror = function(msg) { document.getElementById('debug-msg').innerText = msg; };
const { useState, useEffect, useRef } = React;
const md = window.markdownit();
// --- CONFIG ---
const PROJECT_URL = 'https://wcgvbbgfagmotcxcztd.supabase.co';
const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndjZ3ZiYmdmZ2FnbW90Y3hjenRkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU5Njc2OTgsImV4cCI6MjA4MTU0MzY5OH0.65hYmquYB11_vot1HmChGTukwp0gyNNFXbE2W8Ys84A';
// --- BRAIN (GROQ / Llama 3.3) ---
const brain = {
think: async (history, apiKey) => {
if (!apiKey) return "Error: Intelligence Core Offline. Please enter your Groq API Key in settings.";
const systemPrompt = "You are DONO, a high-performance financial intelligence unit. You are concise, analytical, and professional. You use markdown for formatting. You focus on markets, data, and strategy.";
// Format for OpenAI-compatible API (Groq uses this)
const messages = [
{ role: "system", content: systemPrompt },
...history.map(msg => ({
role: msg.role === 'user' ? 'user' : 'assistant',
content: msg.text
}))
];
try {
const response = await fetch("https://api.groq.com/openai/v1/chat/completions", {
method: "POST",
headers: {
"Authorization": `Bearer ${apiKey}`,
"Content-Type": "application/json"
},
body: JSON.stringify({
messages: messages,
model: "llama-3.3-70b-versatile", // UPDATED: Latest stable model
temperature: 0.7
})
});
const data = await response.json();
if (data.error) {
return `System Error: ${data.error.message}`;
}
return data.choices[0].message.content;
} catch (e) {
return "Error: Connection to Neural Net failed. Check internet.";
}
}
};
// --- MEMORY ---
const db = {
fetch: async (key) => {
try {
const res = await fetch(`${PROJECT_URL}/rest/v1/app_storage?key=eq.${key}&select=value`, {
headers: { 'apikey': SUPABASE_KEY, 'Authorization': `Bearer ${SUPABASE_KEY}` }
});
if (res.ok) {
const data = await res.json();
if (data.length > 0) return data[0].value;
}
} catch(e) {}
const local = localStorage.getItem(key);
return local ? JSON.parse(local) : [];
},
push: async (key, value) => {
localStorage.setItem(key, JSON.stringify(value));
try {
await fetch(`${PROJECT_URL}/rest/v1/app_storage`, {
method: 'POST',
headers: {
'apikey': SUPABASE_KEY, 'Authorization': `Bearer ${SUPABASE_KEY}`, 'Content-Type': 'application/json',
'Prefer': 'resolution=merge-duplicates'
},
body: JSON.stringify({ key, value })
});
} catch(e) {}
}
};
// --- ICONS ---
const Icon = ({ name, className }) => {
if (name === 'cpu') return <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect x="4" y="4" width="16" height="16" rx="2" ry="2"></rect><rect x="9" y="9" width="6" height="6"></rect><line x1="9" y1="1" x2="9" y2="4"></line><line x1="15" y1="1" x2="15" y2="4"></line><line x1="9" y1="20" x2="9" y2="23"></line><line x1="15" y1="20" x2="15" y2="23"></line><line x1="20" y1="9" x2="23" y2="9"></line><line x1="20" y1="14" x2="23" y2="14"></line><line x1="1" y1="9" x2="4" y2="9"></line><line x1="1" y1="14" x2="4" y2="14"></line></svg>;
if (name === 'lock') return <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>;
if (name === 'arrowRight') return <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>;
if (name === 'settings') return <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>;
if (name === 'logout') return <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>;
if (name === 'x') return <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>;
if (name === 'arrowUp') return <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="12" y1="19" x2="12" y2="5"></line><polyline points="5 12 12 5 19 12"></polyline></svg>;
if (name === 'bot') return <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect x="3" y="11" width="18" height="10" rx="2"></rect><circle cx="12" cy="5" r="2"></circle><path d="M12 7v4"></path><line x1="8" y1="16" x2="8" y2="16"></line><line x1="16" y1="16" x2="16" y2="16"></line></svg>;
if (name === 'user') return <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>;
return null;
};
// --- CHART COMPONENT ---
const Chart = ({ symbol }) => {
const chartId = `tv_${symbol}_${Math.random().toString(36).substr(2, 9)}`;
useEffect(() => {
const container = document.getElementById(chartId);
if (container && !container.hasChildNodes()) {
const script = document.createElement('script');
script.src = 'https://s3.tradingview.com/tv.js';
script.async = true;
script.onload = () => {
new window.TradingView.widget({
"width": "100%", "height": 350, "symbol": symbol, "interval": "D", "timezone": "Etc/UTC", "theme": "dark", "style": "1", "locale": "en", "toolbar_bg": "#f1f3f6", "enable_publishing": false, "hide_top_toolbar": false, "save_image": false, "container_id": chartId, "backgroundColor": "rgba(0, 0, 0, 1)"
});
};
container.appendChild(script);
}
}, [symbol]);
return React.createElement("div", { className: "w-full rounded-2xl overflow-hidden border border-zinc-800 bg-black mt-3 shadow-2xl" },
React.createElement("div", { className: "bg-zinc-900/50 px-4 py-2 border-b border-zinc-800 flex justify-between items-center" },
React.createElement("span", { className: "text-xs font-bold text-zinc-400 tracking-wider" }, "MARKET DATA"),
React.createElement("span", { className: "text-xs font-bold text-white" }, symbol)
),
React.createElement("div", { id: chartId, className: "h-[350px] w-full" })
);
};
// --- MAIN APP ---
function App() {
const [isAuth, setIsAuth] = useState(false);
const [pin, setPin] = useState('');
const [input, setInput] = useState('');
const [messages, setMessages] = useState([]);
const [isTyping, setIsTyping] = useState(false);
const [settingsOpen, setSettingsOpen] = useState(false);
const [apiKey, setApiKey] = useState(() => localStorage.getItem('dono_groq_key') || '');
const scrollRef = useRef(null);
useEffect(() => {
if (isAuth) {
db.fetch(`dono_chat_v4_${pin}`).then(msgs => {
if (msgs && msgs.length > 0) setMessages(msgs);
else setMessages([{ id: 1, role: 'assistant', text: "DONO Online. Systems Nominal.", timestamp: new Date().toISOString() }]);
});
}
}, [isAuth]);
useEffect(() => {
if (scrollRef.current) scrollRef.current.scrollTop = scrollRef.current.scrollHeight;
}, [messages, isTyping]);
const saveApiKey = (key) => {
setApiKey(key);
localStorage.setItem('dono_groq_key', key);
};
const handleSend = async () => {
if (!input.trim()) return;
const userMsg = { id: Date.now(), role: 'user', text: input, timestamp: new Date().toISOString() };
const newHistory = [...messages, userMsg];
setMessages(newHistory);
setInput('');
setIsTyping(true);
db.push(`dono_chat_v4_${pin}`, newHistory);
// Charts Check
let meta = null;
const clean = input.toUpperCase();
if (clean.includes('BTC')) meta = { type: 'chart', symbol: 'BTCUSDT' };
else if (clean.includes('ETH')) meta = { type: 'chart', symbol: 'ETHUSDT' };
else if (clean.includes('SOL')) meta = { type: 'chart', symbol: 'SOLUSDT' };
else if (clean.includes('TSLA')) meta = { type: 'chart', symbol: 'TSLA' };
// Brain Check
const replyText = await brain.think(newHistory.slice(-10), apiKey);
const botMsg = { id: Date.now() + 1, role: 'assistant', text: replyText, meta, timestamp: new Date().toISOString() };
const finalHistory = [...newHistory, botMsg];
setMessages(finalHistory);
setIsTyping(false);
db.push(`dono_chat_v4_${pin}`, finalHistory);
};
if (!isAuth) return React.createElement("div", { className: "flex-1 flex flex-col items-center justify-center p-6 bg-black min-h-screen" },
React.createElement("div", { className: "w-24 h-24 rounded-full bg-gradient-to-tr from-zinc-800 to-black border border-zinc-700 flex items-center justify-center shadow-2xl mb-8" },
React.createElement(Icon, { name: "cpu", className: "w-10 h-10 text-white opacity-80" })
),
React.createElement("h1", { className: "text-3xl font-medium tracking-tight text-white mb-2" }, "DONO Access"),
React.createElement("div", { className: "flex flex-col gap-4 w-full max-w-[280px]" },
React.createElement("input", { type: "password", value: pin, onChange: e => setPin(e.target.value), maxLength: "4", className: "w-full bg-zinc-900 border border-zinc-800 text-center text-2xl tracking-[0.5em] text-white py-4 rounded-2xl focus:outline-none focus:ring-2 focus:ring-white/20 transition-all placeholder-zinc-700", placeholder: "••••", autoFocus: true }),
React.createElement("button", { onClick: () => pin.length === 4 && setIsAuth(true), className: "w-full bg-white text-black font-semibold py-4 rounded-2xl hover:bg-zinc-200 transition-colors flex items-center justify-center gap-2" },
"Enter", React.createElement(Icon, { name: "arrowRight", className: "w-4 h-4" })
)
)
);
return React.createElement("div", { className: "flex-1 flex flex-col h-full bg-black relative" },
// Header
React.createElement("div", { className: "absolute top-0 left-0 right-0 h-16 glass-panel z-20 flex items-center justify-between px-6" },
React.createElement("div", { className: "flex items-center gap-3" },
React.createElement("div", { className: "w-8 h-8 bg-zinc-900 rounded-lg flex items-center justify-center border border-zinc-800" },
React.createElement(Icon, { name: "cpu", className: "w-4 h-4 text-white" })
),
React.createElement("span", { className: "font-medium text-sm tracking-wide text-zinc-300" }, "DONO")
),
React.createElement("div", { className: "flex items-center gap-4" },
React.createElement("button", { onClick: () => setSettingsOpen(!settingsOpen), className: `text-zinc-500 hover:text-white transition-colors ${!apiKey && 'text-amber-500 animate-pulse'}` },
React.createElement(Icon, { name: "settings", className: "w-5 h-5" })
),
React.createElement("button", { onClick: () => setIsAuth(false), className: "text-zinc-500 hover:text-white transition-colors" },
React.createElement(Icon, { name: "logout", className: "w-5 h-5" })
)
)
),
// Settings
settingsOpen && React.createElement("div", { className: "absolute inset-0 z-30 bg-black/80 backdrop-blur-sm flex items-center justify-center p-6" },
React.createElement("div", { className: "bg-zinc-900 w-full max-w-md rounded-2xl border border-zinc-800 p-6 shadow-2xl" },
React.createElement("div", { className: "flex justify-between items-center mb-6" },
React.createElement("h3", { className: "text-white font-bold" }, "System Configuration"),
React.createElement("button", { onClick: () => setSettingsOpen(false) },
React.createElement(Icon, { name: "x", className: "w-5 h-5 text-zinc-500 hover:text-white" })
)
),
React.createElement("div", { className: "space-y-4" },
React.createElement("div", null,
React.createElement("label", { className: "text-xs text-zinc-500 uppercase font-bold block mb-2" }, "Groq API Key"),
React.createElement("input", { type: "password", value: apiKey, onChange: e => saveApiKey(e.target.value), placeholder: "Paste Key here...", className: "w-full bg-black border border-zinc-800 rounded-lg p-3 text-white text-sm focus:outline-none focus:border-white transition-colors" }),
React.createElement("p", { className: "text-[10px] text-zinc-600 mt-2" }, "Free at console.groq.com")
),
React.createElement("button", { onClick: () => setSettingsOpen(false), className: "w-full bg-white text-black font-bold py-3 rounded-lg hover:bg-zinc-200" }, "Save Configuration")
)
)
),
// Chat Area
React.createElement("div", { ref: scrollRef, className: "flex-1 overflow-y-auto pt-24 pb-32 px-4 md:px-0" },
React.createElement("div", { className: "max-w-3xl mx-auto space-y-8" },
messages.map((msg, idx) =>
React.createElement("div", { key: idx, className: `flex gap-4 msg-enter ${msg.role === 'user' ? 'justify-end' : 'justify-start'}` },
msg.role === 'assistant' && React.createElement("div", { className: "w-8 h-8 rounded-full bg-zinc-800 border border-zinc-700 flex-shrink-0 flex items-center justify-center mt-1" },
React.createElement(Icon, { name: "bot", className: "w-4 h-4 text-zinc-400" })
),
React.createElement("div", { className: `flex flex-col max-w-[85%] ${msg.role === 'user' ? 'items-end' : 'items-start'}` },
React.createElement("div", { className: `px-5 py-3.5 text-[15px] leading-7 prose ${msg.role === 'user' ? 'bg-zinc-800 text-white rounded-2xl rounded-tr-none' : 'text-zinc-300'}` },
msg.role === 'assistant' ? React.createElement("div", { dangerouslySetInnerHTML: { __html: md.render(msg.text) } }) : msg.text
),
msg.meta && msg.meta.type === 'chart' && React.createElement("div", { className: "w-full min-w-[300px] md:min-w-[500px]" }, React.createElement(Chart, { symbol: msg.meta.symbol })),
React.createElement("span", { className: "text-[10px] text-zinc-600 mt-2 ml-1" }, new Date(msg.timestamp).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }))
),
msg.role === 'user' && React.createElement("div", { className: "w-8 h-8 rounded-full bg-white flex-shrink-0 flex items-center justify-center mt-1" },
React.createElement(Icon, { name: "user", className: "w-4 h-4 text-black" })
)
)
),
isTyping && React.createElement("div", { className: "flex gap-4" },
React.createElement("div", { className: "w-8 h-8 rounded-full bg-zinc-800 border border-zinc-700 flex-shrink-0 flex items-center justify-center" },
React.createElement(Icon, { name: "bot", className: "w-4 h-4 text-zinc-400" })
),
React.createElement("div", { className: "flex items-center gap-1 h-8" },
React.createElement("div", { className: "w-1.5 h-1.5 bg-zinc-600 rounded-full typing-dot" }),
React.createElement("div", { className: "w-1.5 h-1.5 bg-zinc-600 rounded-full typing-dot" }),
React.createElement("div", { className: "w-1.5 h-1.5 bg-zinc-600 rounded-full typing-dot" })
)
)
)
),
// Input
React.createElement("div", { className: "absolute bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-black via-black to-transparent" },
React.createElement("div", { className: "max-w-3xl mx-auto relative glass-panel rounded-2xl overflow-hidden shadow-2xl" },
React.createElement("input", {
type: "text", value: input, onChange: e => setInput(e.target.value), onKeyDown: e => e.key === 'Enter' && handleSend(),
placeholder: apiKey ? "Message DONO..." : "Connect API Key first...", className: "w-full bg-transparent text-white px-5 py-4 pr-14 focus:outline-none placeholder-zinc-600 text-[15px]", autoFocus: true, disabled: !apiKey && !isAuth
}),
React.createElement("button", { onClick: handleSend, className: `absolute right-2 top-2 p-2 rounded-xl transition-all duration-200 ${input.trim() ? 'bg-white text-black hover:bg-zinc-200' : 'bg-zinc-800 text-zinc-500 cursor-not-allowed'}` },
React.createElement(Icon, { name: "arrowUp", className: "w-5 h-5" })
)
)
)
);
}
const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(React.createElement(App));
</script>
</body>
</html>
