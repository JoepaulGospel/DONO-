<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>DONO</title>
<!-- 1. STYLES -->
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
body {
font-family: 'Inter', -apple-system, sans-serif;
background-color: #000000;
color: #EDEDED;
-webkit-font-smoothing: antialiased;
}
/* Premium Scrollbar */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: #333; border-radius: 10px; }
::-webkit-scrollbar-thumb:hover { background: #555; }
/* Animations */
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
.msg-enter { animation: fadeIn 0.3s ease-out forwards; }
.glass-panel {
background: rgba(20, 20, 20, 0.6);
backdrop-filter: blur(20px);
-webkit-backdrop-filter: blur(20px);
border-bottom: 1px solid rgba(255, 255, 255, 0.08);
}
.typing-dot { animation: bounce 1.4s infinite ease-in-out both; }
.typing-dot:nth-child(1) { animation-delay: -0.32s; }
.typing-dot:nth-child(2) { animation-delay: -0.16s; }
@keyframes bounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }
</style>
<!-- 2. ROBUST LIBRARIES (Cloudflare CDN) -->
<script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
</head>
<body class="h-screen w-screen overflow-hidden selection:bg-white selection:text-black">
<!-- Fail-safe loading screen -->
<div id="root" class="h-full w-full flex flex-col items-center justify-center text-zinc-500">
<div class="animate-pulse">Initializing DONO System...</div>
<div id="error-log" class="mt-4 text-red-500 text-xs font-mono"></div>
</div>
<!-- Script Check -->
<script>
setTimeout(() => {
if (!window.React) {
document.getElementById('error-log').innerText = "Network Error: React failed to load. Please check your internet connection.";
}
}, 5000);
</script>
<!-- 3. APP LOGIC -->
<script type="text/babel">
const { useState, useEffect, useRef } = React;
// --- CONFIG ---
const PROJECT_URL = 'https://wcgvbbgfagmotcxcztd.supabase.co';
const API_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndjZ3ZiYmdmZ2FnbW90Y3hjenRkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU5Njc2OTgsImV4cCI6MjA4MTU0MzY5OH0.65hYmquYB11_vot1HmChGTukwp0gyNNFXbE2W8Ys84A';
// --- MEMORY ENGINE ---
const db = {
fetch: async (key) => {
try {
const res = await fetch(`${PROJECT_URL}/rest/v1/app_storage?key=eq.${key}&select=value`, {
headers: { 'apikey': API_KEY, 'Authorization': `Bearer ${API_KEY}` }
});
if (res.ok) {
const data = await res.json();
if (data.length > 0) return data[0].value;
}
} catch(e) {}
const local = localStorage.getItem(key);
return local ? JSON.parse(local) : [];
},
push: async (key, value) => {
localStorage.setItem(key, JSON.stringify(value));
try {
await fetch(`${PROJECT_URL}/rest/v1/app_storage`, {
method: 'POST',
headers: {
'apikey': API_KEY, 'Authorization': `Bearer ${API_KEY}`, 'Content-Type': 'application/json',
'Prefer': 'resolution=merge-duplicates'
},
body: JSON.stringify({ key, value })
});
} catch(e) {}
}
};
// --- NATIVE ICONS ---
const Icon = ({ name, className }) => {
const icons = {
cpu: <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>,
lock: <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/>,
arrowRight: <path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>,
arrowUp: <path d="M12 19V5"/><path d="m5 12 7-7 7 7"/>,
logout: <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><path d="m16 17 5-5-5-5"/><path d="M21 12H9"/>,
bot: <rect x="3" y="11" width="18" height="10" rx="2"/><circle cx="12" cy="5" r="2"/><path d="M12 7v4"/><line x1="8" y1="16" x2="8" y2="16"/><line x1="16" y1="16" x2="16" y2="16"/>,
user: <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/>
};
return (
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
{icons[name] || icons.cpu}
</svg>
);
};
// --- CHART COMPONENT ---
const Chart = ({ symbol }) => {
const chartId = `tv_${symbol}_${Math.random().toString(36).substr(2, 9)}`;
useEffect(() => {
const container = document.getElementById(chartId);
if (container && !container.hasChildNodes()) {
const script = document.createElement('script');
script.src = 'https://s3.tradingview.com/tv.js';
script.async = true;
script.onload = () => {
new window.TradingView.widget({
"width": "100%", "height": 350, "symbol": symbol, "interval": "D", "timezone": "Etc/UTC", "theme": "dark", "style": "1", "locale": "en", "toolbar_bg": "#f1f3f6", "enable_publishing": false, "hide_top_toolbar": false, "save_image": false, "container_id": chartId, "backgroundColor": "rgba(0, 0, 0, 1)"
});
};
container.appendChild(script);
}
}, [symbol]);
return (
<div className="w-full rounded-2xl overflow-hidden border border-zinc-800 bg-black mt-3 shadow-2xl">
<div className="bg-zinc-900/50 px-4 py-2 border-b border-zinc-800 flex justify-between items-center">
<span className="text-xs font-bold text-zinc-400 tracking-wider">MARKET DATA</span>
<span className="text-xs font-bold text-white">{symbol}</span>
</div>
<div id={chartId} className="h-[350px] w-full"></div>
</div>
);
};
// --- MAIN APP ---
function App() {
const [isAuth, setIsAuth] = useState(false);
const [pin, setPin] = useState('');
const [input, setInput] = useState('');
const [messages, setMessages] = useState([]);
const [isTyping, setIsTyping] = useState(false);
const scrollRef = useRef(null);
// INITIALIZE
useEffect(() => {
if (isAuth) {
db.fetch(`dono_chat_v2_${pin}`).then(msgs => {
if (msgs && msgs.length > 0) setMessages(msgs);
else setMessages([{
id: 1,
role: 'assistant',
text: "Hello. I am DONO. I can analyze markets, track your finances, or just chat. How can I help?",
timestamp: new Date().toISOString()
}]);
});
}
}, [isAuth]);
useEffect(() => {
if (scrollRef.current) scrollRef.current.scrollTop = scrollRef.current.scrollHeight;
}, [messages, isTyping]);
// SEND HANDLER
const handleSend = async () => {
if (!input.trim()) return;
const userMsg = { id: Date.now(), role: 'user', text: input, timestamp: new Date().toISOString() };
const newHistory = [...messages, userMsg];
setMessages(newHistory);
setInput('');
setIsTyping(true);
db.push(`dono_chat_v2_${pin}`, newHistory);
// --- MOCK INTELLIGENCE ---
setTimeout(() => {
let responseText = "I've noted that.";
let meta = null;
const clean = userMsg.text.toUpperCase();
if (clean.includes('BTC') || clean.includes('BITCOIN')) {
responseText = "Here is the current market structure for Bitcoin.";
meta = { type: 'chart', symbol: 'BTCUSDT' };
} else if (clean.includes('ETH')) {
responseText = "Pulling up Ethereum data.";
meta = { type: 'chart', symbol: 'ETHUSDT' };
} else if (clean.includes('TSLA')) {
responseText = "Tesla charts loaded.";
meta = { type: 'chart', symbol: 'TSLA' };
} else if (clean.includes('NVDA')) {
responseText = "NVIDIA Corp. Analysis.";
meta = { type: 'chart', symbol: 'NVDA' };
} else {
const replies = ["I can help you analyze that further.", "Understood. Is there specific data you need?", "I've added that to my context window.", "Interesting. Let's look at the financials."];
responseText = replies[Math.floor(Math.random() * replies.length)];
}
const botMsg = { id: Date.now() + 1, role: 'assistant', text: responseText, meta, timestamp: new Date().toISOString() };
const finalHistory = [...newHistory, botMsg];
setMessages(finalHistory);
setIsTyping(false);
db.push(`dono_chat_v2_${pin}`, finalHistory);
}, 1200);
};
// LOGIN UI
if (!isAuth) return (
<div className="flex-1 flex flex-col items-center justify-center p-6 bg-black min-h-screen">
<div className="mb-8 relative">
<div className="w-24 h-24 rounded-full bg-gradient-to-tr from-zinc-800 to-black border border-zinc-700 flex items-center justify-center shadow-2xl">
<Icon name="cpu" className="w-10 h-10 text-white opacity-80" />
</div>
<div className="absolute -bottom-2 -right-2 w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-lg">
<Icon name="lock" className="w-4 h-4 text-black" />
</div>
</div>
<h1 className="text-3xl font-medium tracking-tight text-white mb-2">Welcome to DONO</h1>
<p className="text-zinc-500 text-sm mb-10">Your Personal Intelligence Unit</p>
<div className="flex flex-col gap-4 w-full max-w-[280px]">
<input type="password" value={pin} onChange={e => setPin(e.target.value)} maxLength="4" className="w-full bg-zinc-900 border border-zinc-800 text-center text-2xl tracking-[0.5em] text-white py-4 rounded-2xl focus:outline-none focus:ring-2 focus:ring-white/20 transition-all placeholder-zinc-700" placeholder="••••" autoFocus />
<button onClick={() => pin.length === 4 && setIsAuth(true)} className="w-full bg-white text-black font-semibold py-4 rounded-2xl hover:bg-zinc-200 transition-colors flex items-center justify-center gap-2">
Enter System <Icon name="arrowRight" className="w-4 h-4" />
</button>
</div>
</div>
);
// CHAT UI
return (
<div className="flex-1 flex flex-col h-full bg-black relative">
{/* TOP BAR */}
<div className="absolute top-0 left-0 right-0 h-16 glass-panel z-20 flex items-center justify-between px-6">
<div className="flex items-center gap-3">
<div className="w-8 h-8 bg-zinc-900 rounded-lg flex items-center justify-center border border-zinc-800">
<Icon name="cpu" className="w-4 h-4 text-white" />
</div>
<span className="font-medium text-sm tracking-wide text-zinc-300">DONO</span>
</div>
<div className="flex items-center gap-4">
<div className="h-2 w-2 rounded-full bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.5)]"></div>
<button onClick={() => setIsAuth(false)} className="text-zinc-500 hover:text-white transition-colors">
<Icon name="logout" className="w-5 h-5" />
</button>
</div>
</div>
{/* CHAT STREAM */}
<div ref={scrollRef} className="flex-1 overflow-y-auto pt-24 pb-32 px-4 md:px-0">
<div className="max-w-3xl mx-auto space-y-8">
{messages.map((msg, idx) => (
<div key={idx} className={`flex gap-4 msg-enter ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>
{msg.role === 'assistant' && (
<div className="w-8 h-8 rounded-full bg-zinc-800 border border-zinc-700 flex-shrink-0 flex items-center justify-center mt-1">
<Icon name="bot" className="w-4 h-4 text-zinc-400" />
</div>
)}
<div className={`flex flex-col max-w-[85%] ${msg.role === 'user' ? 'items-end' : 'items-start'}`}>
<div className={`px-5 py-3.5 text-[15px] leading-7 ${msg.role === 'user' ? 'bg-zinc-800 text-white rounded-2xl rounded-tr-none' : 'text-zinc-300'}`}>
{msg.text}
</div>
{msg.meta && msg.meta.type === 'chart' && (
<div className="w-full min-w-[300px] md:min-w-[500px]"><Chart symbol={msg.meta.symbol} /></div>
)}
<span className="text-[10px] text-zinc-600 mt-2 ml-1">{new Date(msg.timestamp).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</span>
</div>
{msg.role === 'user' && (
<div className="w-8 h-8 rounded-full bg-white flex-shrink-0 flex items-center justify-center mt-1">
<Icon name="user" className="w-4 h-4 text-black" />
</div>
)}
</div>
))}
{isTyping && (
<div className="flex gap-4">
<div className="w-8 h-8 rounded-full bg-zinc-800 border border-zinc-700 flex-shrink-0 flex items-center justify-center">
<Icon name="bot" className="w-4 h-4 text-zinc-400" />
</div>
<div className="flex items-center gap-1 h-8">
<div className="w-1.5 h-1.5 bg-zinc-600 rounded-full typing-dot"></div>
<div className="w-1.5 h-1.5 bg-zinc-600 rounded-full typing-dot"></div>
<div className="w-1.5 h-1.5 bg-zinc-600 rounded-full typing-dot"></div>
</div>
</div>
)}
</div>
</div>
{/* INPUT AREA */}
<div className="absolute bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-black via-black to-transparent">
<div className="max-w-3xl mx-auto relative glass-panel rounded-2xl overflow-hidden shadow-2xl">
<input type="text" value={input} onChange={e => setInput(e.target.value)} onKeyDown={e => e.key === 'Enter' && handleSend()} placeholder="Message DONO..." className="w-full bg-transparent text-white px-5 py-4 pr-14 focus:outline-none placeholder-zinc-600 text-[15px]" autoFocus />
<button onClick={handleSend} className={`absolute right-2 top-2 p-2 rounded-xl transition-all duration-200 ${input.trim() ? 'bg-white text-black hover:bg-zinc-200' : 'bg-zinc-800 text-zinc-500 cursor-not-allowed'}`}><Icon name="arrowUp" className="w-5 h-5" /></button>
</div>
<div className="text-center mt-3"><p className="text-[10px] text-zinc-600">DONO can make mistakes. Verify important financial data.</p></div>
</div>
</div>
);
}
const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(<App />);
</script>
</body>
</html>
